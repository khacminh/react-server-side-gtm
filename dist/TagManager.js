'use strict';var _Snippets=require('./Snippets'),_Snippets2=_interopRequireDefault(_Snippets);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function addElement(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'script',c=document.createElement(b);return c.innerHTML=a,c}var TagManager={dataScript:function c(a){var b=document.createElement('script');return b.innerHTML=a,b},gtm:function f(a){var b=_Snippets2.default.tags(a),c=b.noScripts.map(function(a){return addElement(a,'noscript')}),d=b.scripts.map(function(a){return addElement(a,'script')}),e=this.dataScript(b.dataLayerVar);return{noScripts:c,scripts:d,dataScript:e}},initialize:function w(a){var b=a.gtmId,c=a.src,d=c===void 0?'https://www.googletagmanager.com':c,e=a.events,f=e===void 0?{}:e,g=a.dataLayer,h=a.dataLayerName,i=h===void 0?'dataLayer':h,j=a.auth,k=j===void 0?'':j,l=a.preview,m=l===void 0?'':l,n=a.jsDir,o=n===void 0?'':n,p=a.htmlDir,q=p===void 0?'':p,r=a.reportInterval,s=r===void 0?15e3:r,t=a.idleInteval,u=t===void 0?5e3:t,v=this.gtm({id:b,src:d,events:f,dataLayer:g||void 0,dataLayerName:i,auth:k,preview:m,jsDir:o,htmlDir:q,reportInterval:s,idleInteval:u});g&&document.head.appendChild(v.dataScript),v.scripts.forEach(function(a){document.head.insertBefore(a,document.head.childNodes[0])}),v.noScripts.forEach(function(a){document.body.insertBefore(a,document.body.childNodes[0])})},dataLayer:function g(a){var b=a.dataLayer,c=a.dataLayerName,d=c===void 0?'dataLayer':c;if(window[d])return window[d].push(b);var e=_Snippets2.default.dataLayer(b,d),f=this.dataScript(e);document.head.insertBefore(f,document.head.childNodes[0])}};module.exports=TagManager;